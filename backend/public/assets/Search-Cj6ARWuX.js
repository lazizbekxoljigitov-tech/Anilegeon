import{j as e,I as k,a as g}from"./index-CRKTpU-g.js";import{O as S,r as i,S as p,Q as C,V as A,A as z,m as o}from"./vendor-ui-BWBM4E-P.js";import{A as P}from"./AnimeCard-DNBUoIz0.js";import{S as _}from"./SkeletonCard-kwhCOLwW.js";import{u as q}from"./i18n-lib-Bl3zpvLj.js";const R=()=>{const{t:r}=q(),[d,m]=S(),[l,u]=i.useState(d.get("q")||""),[n,y]=i.useState([]),[f,b]=i.useState([]),[c,j]=i.useState(d.get("cat")||""),[N,x]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const{data:s}=await g.get("/categories");b(s.data)}catch{console.error("Failed to fetch categories")}})()},[]),i.useEffect(()=>{const a=async()=>{x(!0);try{const t=new URLSearchParams;l&&t.append("search",l),c&&t.append("category",c);const{data:w}=await g.get(`/anime?${t.toString()}`);y(w.data.anime)}catch{console.error("Search failed")}finally{x(!1)}},s=setTimeout(()=>{a()},500);return()=>clearTimeout(s)},[l,c]);const v=a=>{const s=a.target.value;u(s),m(t=>(s?t.set("q",s):t.delete("q"),t))},h=a=>{const s=c===a?"":a;j(s),m(t=>(s?t.set("cat",s):t.delete("cat"),t))};return e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-12 gap-6",children:e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-5xl font-black italic uppercase tracking-tighter mb-4",children:r("search.title")}),e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx(p,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",size:22}),e.jsx(k,{type:"text",value:l,onChange:v,placeholder:r("search.placeholder"),className:"pl-12 h-14 bg-dark-accent rounded-xl text-lg border-dark-border"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-12",children:[e.jsxs("aside",{className:"lg:col-span-1 space-y-10",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(C,{size:20,className:"text-primary"}),e.jsx("h3",{className:"text-lg font-black italic uppercase tracking-tighter",children:r("search.categories_heading")})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>h(""),className:`px-4 py-2 rounded-xl font-bold text-xs uppercase tracking-widest transition-all ${c?"bg-dark-accent text-gray-400 hover:text-white hover:bg-dark-border":"bg-primary text-white"}`,children:r("search.all_categories")}),f.map(a=>e.jsx("button",{onClick:()=>h(a.id),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all border ${c===a.id?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-dark-light/50 border-dark-border/50 text-gray-400 hover:border-primary/50 hover:text-white"}`,children:a.name},a.id))]})]}),e.jsx("section",{children:e.jsxs("div",{className:"p-6 bg-primary/10 border border-primary/20 rounded-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-primary/20 blur-3xl rounded-full"}),e.jsx("h4",{className:"font-black italic uppercase tracking-tighter mb-2",children:r("search.premium_title")}),e.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:r("search.premium_description")})]})})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-dark-border/30",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{size:20,className:"text-gray-500"}),l&&e.jsxs("p",{className:"text-gray-500 mb-6",children:[n.length," ",r("search.results_found")]})]})}),e.jsx(z,{mode:"wait",children:N?e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(a=>e.jsx(_,{},a))},"loading"):n.length>0?e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(a=>e.jsx(P,{anime:a},a.id))},"results"):e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-24 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-dark-accent rounded-full flex items-center justify-center mb-6",children:e.jsx(p,{size:32,className:"text-gray-600"})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"No Anime Found"}),e.jsx("p",{className:"text-gray-500 max-w-xs",children:"We couldn't find any anime matching your criteria. Try adjusting your filters."})]},"empty")})]})]})]})};export{R as Search};
