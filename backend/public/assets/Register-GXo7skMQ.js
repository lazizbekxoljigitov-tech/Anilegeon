import{u as z,j as e,I as m,B as j,a as b}from"./index-CRKTpU-g.js";import{u as L,r as d,e as D,m as V,P as _,U as q,ab as E,f as N,L as R,z as i}from"./vendor-ui-BWBM4E-P.js";import{u as A}from"./i18n-lib-Bl3zpvLj.js";const U=()=>{var y,g;const x=L(),[a,w]=d.useState({name:"",email:((y=x.state)==null?void 0:y.email)||"",password:"",confirmPassword:""}),[h,v]=d.useState(""),[u,f]=d.useState((g=x.state)!=null&&g.email?"otp":"details"),[p,n]=d.useState(!1),k=D(),C=z(s=>s.setAuth),{t:r}=A(),P=async s=>{var l,o;if(s.preventDefault(),a.password!==a.confirmPassword)return i.error("Passwords do not match");n(!0);try{const{data:t}=await b.post("/auth/register",{name:a.name,email:a.email,password:a.password});t.success&&(i.success(t.message||"Verification code sent to your email"),f("otp"))}catch(t){i.error(((o=(l=t.response)==null?void 0:l.data)==null?void 0:o.error)||"Registration failed.")}finally{n(!1)}},S=async s=>{var l,o;s.preventDefault(),n(!0);try{const{data:t}=await b.post("/auth/verify-otp",{email:a.email,otp:h});t.success&&(C(t.data.user,t.data.token),i.success(r("auth.start_journey")),k("/"))}catch(t){i.error(((o=(l=t.response)==null?void 0:l.data)==null?void 0:o.error)||"Verification failed. Please check the code.")}finally{n(!1)}},c=s=>{w({...a,[s.target.name]:s.target.value})};return e.jsx("div",{className:"container mx-auto px-6 py-12 flex items-center justify-center",children:e.jsx(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-dark-light/40 backdrop-blur-xl border border-dark-border/50 p-10 rounded-3xl shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mb-4 shadow-lg shadow-primary/30",children:e.jsx(_,{className:"text-white fill-white",size:32})}),e.jsx("h2",{className:"text-3xl font-black italic tracking-tighter uppercase",children:u==="details"?r("auth.join_us"):"Verify Email"}),e.jsx("p",{className:"text-gray-500 mt-2 text-center",children:u==="details"?r("auth.start_journey"):`We sent a 6-digit code to ${a.email}`})]}),u==="details"?e.jsxs("form",{onSubmit:P,className:"space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-[38px] text-gray-500",size:20}),e.jsx(m,{label:r("auth.full_name"),placeholder:"John Doe",name:"name",className:"pl-10",required:!0,value:a.name,onChange:c})]}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-[38px] text-gray-500",size:20}),e.jsx(m,{label:r("auth.email_address"),placeholder:"you@example.com",type:"email",name:"email",className:"pl-10",required:!0,value:a.email,onChange:c})]}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-[38px] text-gray-500",size:20}),e.jsx(m,{label:r("auth.password"),placeholder:"••••••••",type:"password",name:"password",className:"pl-10",required:!0,value:a.password,onChange:c})]}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-[38px] text-gray-500",size:20}),e.jsx(m,{label:"Confirm Password",placeholder:"••••••••",type:"password",name:"confirmPassword",className:"pl-10",required:!0,value:a.confirmPassword,onChange:c})]}),e.jsx(j,{type:"submit",className:"w-full py-4 text-lg mt-4",isLoading:p,children:r("common.register")})]}):e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Verification Code"}),e.jsx("input",{type:"text",maxLength:6,placeholder:"000000",className:"w-full bg-black/40 border border-dark-border/50 rounded-xl py-4 text-center text-3xl font-bold tracking-[0.5em] text-primary focus:outline-none focus:border-primary transition-all",required:!0,value:h,onChange:s=>v(s.target.value.replace(/\D/g,""))})]}),e.jsx(j,{type:"submit",className:"w-full py-4 text-lg",isLoading:p,children:"Verify & Join"}),e.jsx("button",{type:"button",onClick:()=>f("details"),className:"w-full text-center text-sm text-gray-500 hover:text-white transition-colors",disabled:p,children:"Change Email"})]}),e.jsxs("p",{className:"mt-8 text-center text-gray-500",children:[r("auth.login_prompt")," ",e.jsx(R,{to:"/login",className:"text-primary font-bold hover:underline",children:r("common.login")})]})]})})})};export{U as Register};
