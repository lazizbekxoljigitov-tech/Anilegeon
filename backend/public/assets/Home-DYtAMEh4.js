import{c as f,a as d,j as e,B as p}from"./index-CRKTpU-g.js";import{r as h,A as j,m as o,o as w,p as y,L as u,P as v,q as N}from"./vendor-ui-BWBM4E-P.js";import{A as x}from"./AnimeRow-BaBEQcGt.js";import{u as k}from"./i18n-lib-Bl3zpvLj.js";import"./AnimeCard-DNBUoIz0.js";const E=f(i=>({trending:[],featured:[],topRated:[],ongoing:[],newEpisodes:[],categories:[],isLoading:!1,fetchHomeData:async()=>{i({isLoading:!0});try{const[t,n,a,r,s]=await Promise.all([d.get("/anime/trending"),d.get("/anime/featured"),d.get("/anime/top-rated"),d.get("/anime/new-episodes"),d.get("/anime",{params:{status:"ongoing",limit:5}})]);i({trending:t.data.data,featured:n.data.data,topRated:a.data.data,newEpisodes:r.data.data,ongoing:s.data.data.anime})}catch(t){console.error("Failed to fetch home data",t)}finally{i({isLoading:!1})}},fetchCategories:async()=>{try{const{data:t}=await d.get("/categories");i({categories:t.data})}catch(t){console.error("Failed to fetch categories",t)}}})),$=({animeList:i})=>{const[t,n]=h.useState(0);if(h.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%i.length)},5e3);return()=>clearInterval(r)},[i.length]),!i.length)return null;const a=i[t];return e.jsxs("div",{className:"relative w-full h-[65vh] md:h-[85vh] overflow-hidden rounded-none md:rounded-3xl mb-8 md:mb-12 shadow-2xl hero-container bg-dark-accent/10",children:[e.jsx(j,{mode:"wait",children:e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"absolute inset-0",children:[e.jsx("img",{src:a.banner_url||a.thumbnail_url,alt:`${a.title} banner`,className:"w-full h-full object-cover",width:"1920",height:"1080",loading:t===0?"eager":"lazy",fetchPriority:t===0?"high":"low",decoding:"async"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-dark-bg via-dark-bg/60 md:via-dark-bg/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-bg via-transparent to-transparent md:hidden"}),e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"container mx-auto px-6 md:px-24 hero-content",children:e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-primary/20 backdrop-blur-md border border-primary/30 rounded-full",children:[e.jsx(w,{size:14,className:"text-primary fill-primary"}),e.jsxs("span",{className:"text-xs md:text-sm font-bold text-primary",children:[a.rating," Rating"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-white/5 backdrop-blur-md border border-white/10 rounded-full",children:[e.jsx(y,{size:14,className:"text-gray-300"}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-300",children:new Date(a.created_at).getFullYear()})]})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-7xl font-black italic uppercase tracking-tighter leading-[1.1] mb-4 md:mb-6 hero-title",children:a.title}),e.jsx("p",{className:"text-gray-400 text-sm md:text-lg line-clamp-2 md:line-clamp-3 mb-6 md:mb-10 max-w-xl leading-relaxed",children:a.description}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx(u,{to:`/anime/${a.id}`,"aria-label":`Watch ${a.title} now`,children:e.jsxs(p,{size:"lg",className:"px-6 md:px-10 h-12 md:h-16 text-base md:text-xl rounded-xl md:rounded-2xl group",children:[e.jsx(v,{className:"w-5 h-5 md:w-6 md:h-6 fill-white group-hover:scale-110 transition-transform"}),"Watch Now"]})}),e.jsx(u,{to:`/anime/${a.id}`,"aria-label":`View details for ${a.title}`,children:e.jsxs(p,{variant:"secondary",size:"lg",className:"px-6 md:px-10 h-12 md:h-16 text-base md:text-xl rounded-xl md:rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10",children:[e.jsx(N,{className:"w-5 h-5 md:w-6 md:h-6"}),e.jsx("span",{className:"hidden sm:inline",children:"More Details"})]})})]})]})})})]},a.id)}),e.jsx("div",{className:"absolute bottom-6 md:bottom-10 left-1/2 -translate-x-1/2 flex gap-2 md:gap-3 z-10",children:i.map((r,s)=>e.jsx("button",{onClick:()=>n(s),"aria-label":`Go to slide ${s+1}`,className:`transition-all duration-300 rounded-full h-1.5 md:h-2 ${s===t?"w-8 md:w-10 bg-primary":"w-1.5 md:w-2 bg-white/20 hover:bg-white/40"}`},s))})]})},A=()=>{const{trending:i,featured:t,topRated:n,ongoing:a,newEpisodes:r,isLoading:s,fetchHomeData:g}=E(),{t:m}=k();h.useEffect(()=>{g()},[g]);const b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},c={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}};return e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsx("section",{className:"mb-20",children:e.jsx($,{animeList:a.length>0?a:t.length>0?t:i.slice(0,5)})}),e.jsxs(o.div,{variants:b,initial:"hidden",animate:"visible",className:"space-y-12",children:[e.jsx(o.section,{variants:c,children:e.jsx(x,{title:m("home.sections.trending"),animeList:i,isLoading:s})}),e.jsx(o.section,{variants:c,children:e.jsx(x,{title:m("home.sections.top_rated"),animeList:n,isLoading:s})}),e.jsx(o.section,{variants:c,children:e.jsx(x,{title:m("home.sections.latest"),animeList:r.map(l=>({...l.anime,id:l.anime_id,title:`${l.anime.title} - EP ${l.episode_number}`})),isLoading:s})})]})]})};export{A as Home};
