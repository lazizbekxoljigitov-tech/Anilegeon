import{j as e,B as d,a as c}from"./index-C5JwLfAb.js";import{v as S,r as i,e as R,m as E,o,L as N,P as A,w as _,x as L,p as $,y as C,C as D,z as n}from"./vendor-ui-BWBM4E-P.js";import{E as I}from"./EpisodeList-BoCBJJEO.js";import{A as P}from"./AnimeRow-DDlL80P1.js";import"./i18n-lib-Bl3zpvLj.js";import"./AnimeCard-Bhu1wPLD.js";const Y=()=>{var b,u,j;const{id:r}=S(),[s,v]=i.useState(null),[m,y]=i.useState([]),[w,x]=i.useState(!0),[l,p]=i.useState(!1),h=R();i.useEffect(()=>{(async()=>{x(!0);try{const[t,f]=await Promise.all([c.get(`/anime/${r}`),c.get(`/anime/${r}/related`)]);if(t.data.success){v(t.data.data);try{const z=await c.get(`/users/saved/check/${r}`);p(z.data.data.saved)}catch{}}f.data.success&&y(f.data.data)}catch{n.error("Failed to load anime details"),h("/")}finally{x(!1)}})(),window.scrollTo(0,0)},[r,h]);const k=async()=>{var a;try{const{data:t}=await c.post("/users/saved/toggle",{anime_id:r});p(t.data.saved),n.success(t.data.message)}catch(t){((a=t.response)==null?void 0:a.status)===401?n.error("Please login to save anime to your watchlist"):n.error("Something went wrong")}};if(w)return e.jsxs("div",{className:"container mx-auto px-6 animate-pulse",children:[e.jsx("div",{className:"h-[50vh] bg-dark-accent rounded-3xl mb-12"}),e.jsx("div",{className:"h-12 w-1/3 bg-dark-accent rounded mb-6"}),e.jsx("div",{className:"h-24 w-full bg-dark-accent rounded mb-12"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(a=>e.jsx("div",{className:"h-20 bg-dark-accent rounded-xl"},a))})]});if(!s)return null;const g=(b=s.episodes)==null?void 0:b[0];return e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("section",{className:"relative h-[60vh] rounded-3xl overflow-hidden mb-12 shadow-2xl",children:[e.jsx("img",{src:s.banner_url||s.thumbnail_url,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-bg via-dark-bg/60 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-dark-bg/80 via-transparent to-transparent hidden md:block"}),e.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-8 md:p-16",children:e.jsxs(E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"max-w-4xl",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-primary/20 backdrop-blur-md border border-primary/30 rounded-full",children:[e.jsx(o,{size:18,className:"text-primary fill-primary"}),e.jsx("span",{className:"text-sm font-black text-primary",children:s.rating})]}),(u=s.anime_categories)==null?void 0:u.map(a=>e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider px-3 py-1 bg-white/5 backdrop-blur-md border border-white/10 rounded-full text-gray-300",children:a.categories.name},a.category_id)),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider px-3 py-1 bg-white/5 backdrop-blur-md border border-white/10 rounded-full text-primary",children:s.status})]}),e.jsx("h1",{className:"text-4xl md:text-6xl font-black italic uppercase tracking-tighter mb-6 leading-tight",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-8",children:[g?e.jsx(N,{to:`/watch/${g.id}`,children:e.jsxs(d,{size:"lg",className:"px-8 h-14 rounded-xl group",children:[e.jsx(A,{className:"fill-white group-hover:scale-110 transition-transform"}),"Watch Episode 1"]})}):e.jsx(d,{size:"lg",disabled:!0,className:"px-8 h-14 rounded-xl",children:"Upcoming"}),e.jsxs(d,{variant:"secondary",size:"lg","aria-label":l?"Remove anime from watchlist":"Add anime to watchlist",className:`px-8 h-14 rounded-xl border border-white/10 transition-colors ${l?"text-primary":""}`,onClick:k,children:[e.jsx(_,{className:l?"fill-primary":""}),l?"In Watchlist":"Add to Watchlist"]}),e.jsx(d,{variant:"ghost",size:"icon","aria-label":"Share this anime",className:"w-14 h-14 rounded-xl border border-white/10",children:e.jsx(L,{size:24})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-2xl font-black italic uppercase tracking-tighter mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-1 bg-primary rounded-full"}),"Synopsis"]}),e.jsx("p",{className:"text-gray-400 text-lg leading-relaxed bg-dark-light/20 p-8 rounded-2xl border border-dark-border/30",children:s.description})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-2xl font-black italic uppercase tracking-tighter flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-1 bg-primary rounded-full"}),"Episodes"]}),e.jsxs("span",{className:"text-gray-500 font-bold uppercase tracking-widest text-xs",children:[((j=s.episodes)==null?void 0:j.length)||0," Total Episodes"]})]}),e.jsx(I,{animeId:s.id,episodes:s.episodes||[]})]})]}),e.jsxs("div",{className:"space-y-12",children:[e.jsxs("section",{className:"bg-dark-light/30 border border-dark-border/50 rounded-2xl p-8",children:[e.jsx("h3",{className:"text-xl font-black italic uppercase tracking-tighter mb-8",children:"Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-dark-border/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx($,{size:18}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Released"})]}),e.jsx("span",{className:"font-bold",children:new Date(s.created_at).getFullYear()})]}),e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-dark-border/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(C,{size:18}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Duration"})]}),e.jsx("span",{className:"font-bold",children:"24m / Ep"})]}),e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-dark-border/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(o,{size:18}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Rating"})]}),e.jsxs("span",{className:"font-bold text-primary",children:[s.rating," / 10"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(D,{size:18}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Views"})]}),e.jsx("span",{className:"font-bold",children:s.view_count.toLocaleString()})]})]})]}),e.jsxs("section",{className:"hidden lg:block",children:[e.jsx("h3",{className:"text-xl font-black italic uppercase tracking-tighter mb-8",children:"Related Anime"}),e.jsx("div",{className:"space-y-4",children:m.slice(0,4).map(a=>e.jsxs(N,{to:`/anime/${a.id}`,className:"group flex gap-4 p-2 rounded-xl hover:bg-dark-accent/50 transition-all",children:[e.jsx("div",{className:"w-16 h-24 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:a.thumbnail_url,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"})}),e.jsxs("div",{className:"py-2",children:[e.jsx("h4",{className:"font-bold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:a.title}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-primary font-bold",children:[e.jsx(o,{size:12,className:"fill-primary"}),a.rating]})]})]},a.id))})]})]})]}),e.jsx("section",{className:"lg:hidden mt-12",children:e.jsx(P,{title:"Related Anime",animeList:m})})]})};export{Y as AnimeDetails};
