import{a as g,j as e,I as N,B as h}from"./index-C5JwLfAb.js";import{r as n,z as o,S as p,m as y,U as w,at as k,a2 as v,ab as M,p as z,aK as C}from"./vendor-ui-BWBM4E-P.js";import{C as l}from"./Card-ZSGk7_Bb.js";import{u as _}from"./i18n-lib-Bl3zpvLj.js";const $=()=>{const{t:a}=_(),[i,u]=n.useState([]),[b,m]=n.useState(!0),[c,f]=n.useState("");n.useEffect(()=>{x()},[]);const x=async()=>{m(!0);try{const{data:s}=await g.get("/admin/users");s.success&&u(s.data)}catch(s){console.error("Failed to fetch users:",s),o.error("Failed to fetch users")}finally{m(!1)}},j=async s=>{const t=s.role==="admin"?"user":"admin";if(window.confirm(`Change ${s.name}'s role to ${t}?`))try{await g.put(`/admin/users/${s.id}/role`,{role:t}),o.success("Role updated successfully"),x()}catch{o.error("Failed to update role")}},d=i.filter(s=>{var t,r;return((t=s.name)==null?void 0:t.toLowerCase().includes(c.toLowerCase()))||((r=s.email)==null?void 0:r.toLowerCase().includes(c.toLowerCase()))});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black italic uppercase tracking-tighter mb-2 text-white",children:a("userManagement.title").split(" ").map((s,t,r)=>t===r.length-1?e.jsx("span",{className:"text-primary",children:s},t):e.jsxs("span",{children:[s," "]},t))}),e.jsx("p",{className:"text-gray-400 font-medium",children:a("userManagement.subtitle")})]}),e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),e.jsx(N,{placeholder:a("userManagement.search_placeholder"),className:"pl-10 bg-dark-light/50 border-dark-border/50 text-white",value:c,onChange:s=>f(s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(l,{className:"p-6 bg-dark-light/50",children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-widest mb-1",children:a("userManagement.total_users")}),e.jsx("h3",{className:"text-3xl font-black italic text-white",children:i.length})]}),e.jsxs(l,{className:"p-6 bg-dark-light/50",children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-widest mb-1",children:a("userManagement.admins")}),e.jsx("h3",{className:"text-3xl font-black italic text-primary",children:i.filter(s=>s.role==="admin").length})]}),e.jsxs(l,{className:"p-6 bg-dark-light/50",children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-widest mb-1",children:a("userManagement.regular_users")}),e.jsx("h3",{className:"text-3xl font-black italic text-white",children:i.filter(s=>s.role==="user").length})]}),e.jsxs(l,{className:"p-6 bg-dark-light/50",children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-widest mb-1",children:a("userManagement.search_results")}),e.jsx("h3",{className:"text-3xl font-black italic text-white",children:d.length})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black italic uppercase tracking-tighter mb-6 text-white flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-1 bg-primary rounded-full"}),a("userManagement.all_users")]}),b?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsx("div",{className:"h-56 bg-dark-light/30 rounded-2xl animate-pulse border border-dark-border/50"},s))}):d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map((s,t)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},children:e.jsxs(l,{className:"p-6 group hover:border-primary/50 transition-all flex flex-col justify-between h-full bg-dark-light/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-dark-accent/50 border border-dark-border/50 overflow-hidden flex-shrink-0",children:s.avatar_url?e.jsx("img",{src:s.avatar_url,className:"w-full h-full object-cover",alt:s.name}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(w,{size:32})})}),e.jsxs("div",{className:`px-3 py-1.5 rounded-full text-xs font-black uppercase tracking-tighter flex items-center gap-1.5 ${s.role==="admin"?"bg-primary/20 text-primary border border-primary/30":"bg-gray-800/50 text-gray-400 border border-gray-700/50"}`,children:[s.role==="admin"?e.jsx(k,{size:12,className:"fill-primary"}):e.jsx(v,{size:12}),s.role]})]}),e.jsxs("div",{className:"mb-6 flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold truncate mb-2 text-white group-hover:text-primary transition-colors",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-3",children:[e.jsx(M,{size:14}),e.jsx("span",{className:"truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-xs",children:[e.jsx(z,{size:12}),e.jsxs("span",{className:"uppercase tracking-widest font-bold",children:[a("userManagement.joined")," ",new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-dark-border/30 flex gap-2",children:[e.jsx(h,{onClick:()=>j(s),variant:"outline",size:"sm",className:"flex-1 text-xs font-bold uppercase tracking-widest",children:s.role==="admin"?a("userManagement.demote"):a("userManagement.promote")}),e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-500/10",children:e.jsx(C,{size:16})})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-20 bg-dark-light/20 rounded-2xl border border-dark-border/30",children:[e.jsx(p,{size:48,className:"mx-auto text-gray-700 mb-4"}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-widest text-sm",children:a("userManagement.no_users")})]})]})]})};export{$ as AdminUsers};
