import{a as l,j as e,B as m,I as S}from"./index-C5JwLfAb.js";import{r as a,z as t,al as z,m as f,j as I,aH as A,a6 as F,A as M}from"./vendor-ui-BWBM4E-P.js";import{C as E}from"./Card-ZSGk7_Bb.js";import"./i18n-lib-Bl3zpvLj.js";const T=()=>{const[y,j]=a.useState([]),[b,x]=a.useState(!0),[N,c]=a.useState(!1),[r,u]=a.useState(null),[i,n]=a.useState(""),[v,g]=a.useState(!1);a.useEffect(()=>{o()},[]);const o=async()=>{x(!0);try{const{data:s}=await l.get("/categories");j(s.data)}catch{t.error("Failed to fetch categories")}finally{x(!1)}},p=s=>{s?(u(s),n(s.name)):(u(null),n("")),c(!0)},C=async s=>{var d,h;if(s.preventDefault(),!!i.trim()){g(!0);try{r?(await l.put(`/categories/${r.id}`,{name:i}),t.success("Category updated successfully")):(await l.post("/categories",{name:i}),t.success("Category created successfully")),c(!1),o()}catch(k){t.error(((h=(d=k.response)==null?void 0:d.data)==null?void 0:h.error)||"Failed to save category")}finally{g(!1)}}},w=async s=>{if(window.confirm("Delete this category? This will remove it from all anime."))try{await l.delete(`/categories/${s}`),t.success("Category deleted successfully"),o()}catch{t.error("Failed to delete category")}};return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black italic uppercase tracking-tighter mb-2",children:["Category ",e.jsx("span",{className:"text-primary",children:"Management"})]}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Manage genres and categories for better organization."})]}),e.jsxs(m,{onClick:()=>p(),className:"shadow-xl shadow-primary/20",children:[e.jsx(z,{size:20}),"New Category"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b?[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-dark-accent rounded-3xl animate-pulse"},s)):y.map(s=>e.jsx(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsxs(E,{className:"p-6 group hover:border-primary/50 transition-all flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-xl flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:e.jsx(I,{size:20})}),e.jsx("h3",{className:"text-lg font-bold truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-dark-border/30",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Active"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(s),className:"p-2 text-gray-500 hover:text-primary transition-colors",children:e.jsx(A,{size:16})}),e.jsx("button",{onClick:()=>w(s.id),className:"p-2 text-gray-500 hover:text-red-500 transition-colors",children:e.jsx(F,{size:16})})]})]})]})},s.id))}),e.jsx(M,{children:N&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-6 bg-black/80 backdrop-blur-sm",children:e.jsxs(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-dark-bg border border-dark-border w-full max-w-md rounded-3xl shadow-2xl p-8",children:[e.jsxs("h2",{className:"text-2xl font-black italic uppercase tracking-tighter mb-8",children:[r?"Edit":"New"," ",e.jsx("span",{className:"text-primary",children:"Category"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsx(S,{label:"Category Name",placeholder:"e.g. Action, Isekai...",required:!0,autoFocus:!0,value:i,onChange:s=>n(s.target.value)}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(m,{variant:"ghost",type:"button",onClick:()=>c(!1),children:"Cancel"}),e.jsx(m,{type:"submit",isLoading:v,className:"px-8",children:r?"Update":"Create"})]})]})]})})})]})};export{T as AdminCategories};
